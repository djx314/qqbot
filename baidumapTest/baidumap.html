<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
	body, html{width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}
	#allmap { width: 70%; height: 100%; overflow: hidden; }
	#result { top: 0px; bottom: 0px; left: 70%; right: 0px; font-size: 12px; position: absolute; }
	dl,dt,dd,ul,li{
		margin:0;
		padding:0;
		list-style:none;
	}
	p{font-size:12px;}
	dt{
		font-size:14px;
		font-family:"微软雅黑";
		font-weight:bold;
		border-bottom:1px dotted #000;
		padding:5px 0 5px 5px;
		margin:5px 0;
	}
	dd{
		padding:5px 0 0 5px;
	}
	li{
		line-height:28px;
	}
	</style>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=aq2GRdRnSw3IcUKCCloddbXU"></script>
	<!--加载鼠标绘制工具-->
	<script type="text/javascript" src="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js"></script>
	<link rel="stylesheet" href="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css" />
	<!--加载检索信息窗口-->
	<script type="text/javascript" src="http://api.map.baidu.com/library/SearchInfoWindow/1.4/src/SearchInfoWindow_min.js"></script>
	<link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.4/src/SearchInfoWindow_min.css" />
	<script type="text/javascript" src="assets/jquery/jquery-1.12.4.min.js"></script>
	<script type="text/javascript" src="assets/knockout/knockout-3.4.2.js"></script>
	<script type="text/javascript" src="assets/knockout/knockout.mapping-2.4.1.js"></script>
	<script type="text/javascript" src="assets/baidumap.js"></script>
	<title>鼠标绘制工具</title>
</head>
<body>
	<div data-bind="visible: state() === 'common'" style="height: 100%;">
		<div id="allmap" style="overflow:hidden;zoom:1;position:relative;">
			<div id="map" style="height:100%;-webkit-transition: all 0.5s ease-in-out;transition: all 0.5s ease-in-out;"></div>
		</div>
		<div id="result">
			<div>
				<input type="text" data-bind="value: searchText" /><button data-bind="click: function() { search(); }">搜索</button>
			</div>
			<div>
				<button type="button" data-bind="click: function() { alert(overlays().length); }">获取绘制的覆盖物个数</button>
				<button type="button" data-bind="click: function() { clearAllOverlays(); }">清除所有覆盖物</button>
				<button data-bind="click: function() { enableEditing(); }">开始编辑</button>
				<button data-bind="click: function() { disableEditing(); }">停止编辑</button>
				<button data-bind="click: function() { toCSV(); }">转化为CSV</button>
			</div>
			<div>
				<div data-bind="foreach: { data: points, as: 'eachPoint' }">
					<div style="margin: 5px;" data-bind="event: { mouseenter: function() { $parent.lightPoint(eachPoint); }, mouseleave: function() { $parent.removeLight(eachPoint); } }">
						第<span data-bind="text: $index"></span>个点:经度:<span data-bind="text: eachPoint.point.lng"></span>维度:<span data-bind="text: eachPoint.point.lat"></span><button data-bind="click: function() { $parent.removePoint(eachPoint); }">删除该点</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div data-bind="visible: state() === 'csv'">
		<div>CSV 格式</div>
		<div>
			<textarea style="width: 100%; height: 200px;" data-bind="textInput: currentCSV"></textarea>
		</div>
		<div>
			<button data-bind="click: function() { overlayFromCSV(); }">把 CSV 数据转化为地图</button>
		</div>
		<div>单行数据</div>
		<div>
			<textarea style="width: 100%; height: 100px;" data-bind="textInput: singleRowCSV"></textarea>
		</div>
		<div>
			<button data-bind="click: function() { overlayFromSingleLine(); }">把单行数据转化为地图</button>
		</div>
		<button data-bind="click: function() { state('common'); }">返回</button>
	</div>
</body>
</html>